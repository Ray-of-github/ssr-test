{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.css","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/isomorphic-style-loader/insertCss.js","webpack:///./server/components/renderUI.js","webpack:///./server/index.js","webpack:///./server/ssr.js","webpack:///./src/App.css?21ae","webpack:///./src/App.js","webpack:///./src/child.js","webpack:///./src/clientRender.js","webpack:///./src/foo.js","webpack:///./src/route.js","webpack:///external \"body-parser\"","webpack:///external \"express\"","webpack:///external \"fs\"","webpack:///external \"path\"","webpack:///external \"react\"","webpack:///external \"react-dom/server\"","webpack:///external \"react-router\""],"names":["RenderUI","content","state","__html","JSON","stringify","replace","express","require","bodyParser","app","use","json","static","ssr","listen","path","fs","template","readFileSync","resolve","__dirname","isPageRequest","req","test","headers","accept","console","log","get","res","send","renderToString","post","body","clientRoutes","data","next","length","end","matchRoutes","routes","location","error","redirect","ssrData","pathname","search","Container","components","props","getInitialProps","p","initialProps","Component","createElement","RouterContext","componentContent","mainContent","branch","route","component","e","warn","App","children","InitialMsg","msg","setMsg","useState","useEffect","window","NUMBER","InitialProps","Promise","setTimeout","Child","InitialNum","num","setNum","ClientRender","__INITIAL_STATE__","Foo","childRoutes","foo"],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA;AACA,kCAAkC,mBAAO,CAAC,qGAAgD;AAC1F;AACA;AACA,cAAc,QAAS,6BAA6B,uBAAuB,GAAG,8BAA8B,mBAAmB,yBAAyB,GAAG,oDAAoD,8BAA8B,2DAA2D,KAAK,GAAG,8BAA8B,8BAA8B,qBAAqB,kBAAkB,2BAA2B,wBAAwB,4BAA4B,kCAAkC,iBAAiB,GAAG,8BAA8B,mBAAmB,GAAG,sCAAsC,UAAU,8BAA8B,KAAK,QAAQ,gCAAgC,KAAK,GAAG;AAC/sB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACba;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;;AAEhB;AACA;AACA;;AAEA;AACA,4CAA4C,qBAAqB;AACjE;;AAEA;AACA,KAAK;AACL,IAAI;AACJ;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,qBAAqB,iBAAiB;AACtC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB,qBAAqB;AACzC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,8BAA8B;;AAE9B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,CAAC;;;AAGD;AACA;AACA;AACA,qDAAqD,cAAc;AACnE;AACA,C;;;;;;;;;;;;AC7FA;;AAEa;;AAEb;;AAEA;AACA,0DAA0D,EAAE;AAC5D;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,+DAA+D;AAC/D;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;AC5FA;AAEe,SAASA,QAAT,CAAkB;AAAEC,SAAF;AAAWC;AAAX,CAAlB,EAAsC;AACnD,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,MAAE,EAAC,MAAR;AAAe,2BAAuB,EAAE;AAAEC,YAAM,EAAEF;AAAV,KAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AACE,2BAAuB,EAAE;AACvBE,YAAM,EAAG,4BAA2BC,IAAI,CAACC,SAAL,CAAeH,KAAf,EAAsBI,OAAtB,CAClC,IADkC,EAElC,SAFkC,CAGlC;AAJqB,KAD3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF,CADF;AAeD,C;;;;;;;;;;;;AClBD;AAAA;AAAA,MAAMC,OAAO,GAAGC,mBAAO,CAAC,wBAAD,CAAvB;;AACA,IAAIC,UAAU,GAAGD,mBAAO,CAAC,gCAAD,CAAxB,C,CACA;;;AACA;AAEA,MAAME,GAAG,GAAGH,OAAO,EAAnB;AACAG,GAAG,CAACC,GAAJ,CAAQF,UAAU,CAACG,IAAX,EAAR;AAEAF,GAAG,CAACC,GAAJ,CAAQJ,OAAO,CAACM,MAAR,CAAe,OAAf,CAAR;AACAC,uDAAG,CAACJ,GAAD,CAAH;AAEAA,GAAG,CAACK,MAAJ,CAAW,IAAX,E;;;;;;;;;;;;;;;;;;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;;AACA,MAAMC,IAAI,GAAGR,mBAAO,CAAC,kBAAD,CAApB;;AACA,MAAMS,EAAE,GAAGT,mBAAO,CAAC,cAAD,CAAlB;;CAGA;AACA;;AAEA,MAAMU,QAAQ,GAAGD,EAAE,CAACE,YAAH,CACfH,IAAI,CAACI,OAAL,CAAaC,SAAb,EAAwB,qBAAxB,CADe,EAEf,MAFe,CAAjB;;AAKA,MAAMC,aAAa,GAAIC,GAAD,IAAS,aAAaC,IAAb,CAAkBD,GAAG,CAACE,OAAJ,CAAYC,MAA9B,CAA/B;;AAEgBhB,kEAAD,IAAS;AACtBiB,SAAO,CAACC,GAAR,CAAY,aAAZ;AAEAlB,KAAG,CAACmB,GAAJ,CAAQ,UAAR,EAAoB,CAACN,GAAD,EAAMO,GAAN,KAAc;AAChCA,OAAG,CAACC,IAAJ,CAASC,uEAAc,eAAC,2DAAC,gDAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAD,CAAvB;AACD,GAFD;AAIAtB,KAAG,CAACuB,IAAJ,CAAS,aAAT,EAAwB,CAACV,GAAD,EAAMO,GAAN,KAAc;AACpCH,WAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBL,GAAG,CAACW,IAA5B;AACAC,gBAAY,GAAGZ,GAAG,CAACW,IAAJ,CAASE,IAAxB;AACAN,OAAG,CAACC,IAAJ,CAAS,MAAT;AACD,GAJD;AAMArB,KAAG,CAACC,GAAJ,CAAQ,gBAAgBY,GAAhB,EAAqBO,GAArB,EAA0BO,IAA1B,EAAgC;AACtC,QAAIF,kDAAY,CAACG,MAAb,KAAwB,CAA5B,EAA+B;AAC7BR,SAAG,CAACS,GAAJ,CAAQ,KAAR;AACA;AACD;;AACDZ,WAAO,CAACC,GAAR,CAAY,UAAZ,EAAwB,aAAaJ,IAAb,CAAkBD,GAAG,CAACE,OAAJ,CAAYC,MAA9B,CAAxB;;AACA,QAAIJ,aAAa,CAACC,GAAD,CAAjB,EAAwB;AACtBI,aAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BO,kDAA9B;AACA,YAAM;AAAEnB;AAAF,UAAWO,GAAjB;AACAI,aAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBZ,IAAxB;AACAwB,gEAAW,CACT;AAAEC,cAAM,EAAEN,kDAAV;AAAwBO,gBAAQ,EAAE1B;AAAlC,OADS,EAET,OAAO2B,KAAP,EAAcC,QAAd,EAAwBC,OAAxB,KAAoC;AAClC;AACA,YAAIF,KAAJ,EAAW;AACTA,eAAK;AACN,SAFD,MAEO,IAAIC,QAAJ,EAAc;AACnBd,aAAG,CAACc,QAAJ,CAAa,GAAb,EAAkBA,QAAQ,CAACE,QAAT,GAAoBF,QAAQ,CAACG,MAA/C;AACD,SAFM,MAEA,IAAIF,OAAJ,EAAa;AAClB;AACA,gBAAMG,SAAS,GAAGH,OAAO,CAACI,UAAR,CAAmB,CAAnB,CAAlB;AACA,cAAIC,KAAK,GAAGF,SAAS,CAACG,eAAV,GACR,MAAMH,SAAS,CAACG,eAAV,EADE,GAER,EAFJ;;AAGAN,iBAAO,CAACI,UAAR,CAAmB,CAAnB,IAAwBG,CAAC,IAAI;AAC3B,kBAAMC,YAAY,GAAG,EAAC,GAAGD,CAAJ;AAAO,iBAAGF;AAAV,aAArB;AACA,gCAAO,2DAAC,SAAD,oBAAeG,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAP;AACD,WAHD,CANkB,CAWlB;;;AAEA,cAAIC,SAAS,GAAGC,2DAAa,CAACC,0DAAD,EAAgBX,OAAhB,CAA7B;AAEA,gBAAMY,gBAAgB,GAAGzB,uEAAc,CAACsB,SAAD,CAAvC,CAfkB,CAiBlB;AAEA;;AACA,gBAAMI,WAAW,GAAG1B,uEAAc,eAChC,2DAAC,4DAAD;AAAU,mBAAO,EAAEyB,gBAAnB;AAAqC,iBAAK,EAAEP,KAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADgC,CAAlC,CApBkB,CAwBlB;AACA;;AAEApB,aAAG,CAACS,GAAJ,CACErB,QAAQ,CAACZ,OAAT,CAAiB,wBAAjB,EAA4C,GAAEoD,WAAY,EAA1D,CADF;AAGD,SA9BM,MA8BA;AACLf,eAAK;AACN;AACF,OAzCQ,CAAX;AA2CA,aA/CsB,CAgDtB;AACA;;AACAhB,aAAO,CAACC,GAAR,CAAY+B,MAAZ;AACA,YAAML,SAAS,GAAGK,MAAM,CAAC,CAAD,CAAN,CAAUC,KAAV,CAAgBC,SAAlC,CAnDsB,CAoDtB;AACA;AACA;AACA;AACA;;AACA,UAAI;AACF,YAAIX,KAAK,GAAGI,SAAS,CAACH,eAAV,GACR,MAAMG,SAAS,CAACH,eAAV,EADE,GAER,EAFJ;AAIAxB,eAAO,CAACC,GAAR,CAAY;AAAEsB;AAAF,SAAZ;AACA,cAAMO,gBAAgB,GAAGzB,uEAAc,eAAC,2DAAC,SAAD,oBAAekB,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAD,CAAvC;AAEA,cAAMQ,WAAW,GAAG1B,uEAAc,eAChC,2DAAC,4DAAD;AAAU,iBAAO,EAAEyB,gBAAnB;AAAqC,eAAK,EAAEP,KAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADgC,CAAlC;AAIAvB,eAAO,CAACC,GAAR,CAAY8B,WAAZ,EAZE,CAaF;;AAEA5B,WAAG,CAACS,GAAJ,CACErB,QAAQ,CAACZ,OAAT,CACE,wBADF,EAEG,kBAAiBoD,WAAY,QAFhC,CADF;AAMD,OArBD,CAqBE,OAAOI,CAAP,EAAU;AACVnC,eAAO,CAACoC,IAAR,CAAaD,CAAb;AACD;AACF;;AACDzB,QAAI;AACL,GAzFD;AA0FD,CAvGD,E;;;;;;;;;;;;;ACnBA;AACA,cAAc,mBAAO,CAAC,yHAA8D;AACpF,oBAAoB,mBAAO,CAAC,iHAAuD;AACnF,8CAA8C,QAAS;;AAEvD;AACA,sCAAsC,gBAAgB;AACtD,kCAAkC,iBAAiB;AACnD,4CAA4C;;AAE5C;AACA;AACA;AACA,QAAQ,KAA8D,EAAE,kBAQnE;;;;;;;;;;;;;;;;;;;CCrBL;;AACA;;AAEA,SAAS2B,GAAT,CAAa;AAAEC,UAAF;AAAYC;AAAZ,CAAb,EAAuC;AACrC,QAAM,CAACC,GAAD,EAAMC,MAAN,IAAgBC,sDAAQ,CAACH,UAAU,IAAI,QAAf,CAA9B,CADqC,CAGrC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAI,yDAAS,CAAC,MAAM;AACdC,UAAM,CAACC,MAAP,GAAgB,CAAhB;AACD,GAFQ,EAEN,EAFM,CAAT;AAIA,sBACE;AAAK,aAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAQ,aAAS,EAAC,YAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BACO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADP,yBAFF,eAKE;AACE,aAAS,EAAC,UADZ;AAEE,QAAI,EAAC,qBAFP;AAGE,UAAM,EAAC,QAHT;AAIE,OAAG,EAAC,qBAJN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAMeL,GANf,CALF,eAaE;AACE,WAAO,EAAE,MAAM;AACbxC,aAAO,CAACC,GAAR,CAAY,MAAZ;AACD,KAHH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAbF,CADF,EAsBGqC,QAtBH,CADF;AA0BD;;AAEcD,kEAAf;;AAEAA,GAAG,CAACb,eAAJ,GAAsB,YAAY;AAChC,SAAO,MAAMsB,YAAY,EAAzB;AACD,CAFD;;AAIA,SAASA,YAAT,GAAwB;AACtB,SAAO,IAAIC,OAAJ,CAAa5C,GAAD,IAAS;AAC1B6C,cAAU,CAAC,MAAM;AACf,YAAMT,UAAU,GAAG,OAAOK,MAAP,KAAkB,WAAlB,GAAgC,QAAhC,GAA2C,QAA9D;AACAzC,SAAG,CAAC;AAAEoC;AAAF,OAAD,CAAH;AACD,KAHS,EAGP,GAHO,CAAV;AAID,GALM,CAAP;AAMD,C;;;;;;;;;;;;;;;;;ACjED;AAEe,SAASU,KAAT,CAAe;AAAEC,YAAF;AAAcX;AAAd,CAAf,EAA2C;AACxD,QAAM,CAACY,GAAD,EAAMC,MAAN,IAAgBV,sDAAQ,CAACQ,UAAU,IAAI,CAAf,CAA9B;AACA,QAAM,CAACV,GAAD,EAAMC,MAAN,IAAgBC,sDAAQ,CAACH,UAAU,IAAI,OAAf,CAA9B;AACA,sBACE,qIACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIC,GAAJ,CADF,eAEE;AAAQ,WAAO,EAAE,MAAMY,MAAM,CAACD,GAAG,GAAG,CAAP,CAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIA,GAAJ,CAHF,CADF;AAOD,C,CAED;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,I;;;;;;;;;;;;;;;;;CCxBA;;AACe,SAASE,YAAT,CAAsB1B,SAAtB,EAAiC;AAC9C,MAAI,OAAOiB,MAAP,KAAkB,WAAtB,EAAmC;AACjC,WAAOjB,SAAP;AACD;;AACD,QAAMJ,KAAK,GAAGqB,MAAM,CAACU,iBAAP,IAA4B,EAA1C;AACAV,QAAM,CAACU,iBAAP,GAA2B,IAA3B,CAL8C,CAM9C;AACA;;AACA3B,WAAS,CAACH,eAAV,GAA4B,IAA5B;AACA,SAAOC,CAAC,IAAI;AACV,UAAMC,YAAY,GAAG,EAAC,GAAGD,CAAJ;AAAO,SAAGF;AAAV,KAArB;AACA,wBAAO,2DAAC,SAAD,oBAAeG,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAP;AACD,GAHD;AAID,C;;;;;;;;;;;;;;;;;AChBD;AAEe,SAAS6B,GAAT,GAAe;AAC5B,QAAM,CAACJ,GAAD,EAAMC,MAAN,IAAgBV,sDAAQ,CAAC,CAAD,CAA9B;AACA,sBAAO,qIACL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADK,eAEL;AAAQ,WAAO,EAAE,MAAMU,MAAM,CAACD,GAAG,GAAG,CAAP,CAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAFK,eAGL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIA,GAAJ,CAHK,CAAP;AAKD,C;;;;;;;;;;;;ACTD;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEe,gEACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE9D,MAAI,EAAE,GADR;AAEE6C,WAAS,EAAEmB,6DAAY,CAAChB,4CAAD,CAFzB;AAGEmB,aAAW,EAAE,CACX;AACEnE,QAAI,EAAE,GADR;AAEE6C,aAAS,EAAEuB,4CAAGA;AAFhB,GADW,EAKX;AACEpE,QAAI,EAAE,GADR;AAEE;AACA6C,aAAS,EAAEe,8CAAKA;AAHlB,GALW;AAHf,CArBa,CAoCb;AACA;AACA;AACA;AAvCa,CAAf,E;;;;;;;;;;;ACLA,wC;;;;;;;;;;;ACAA,oC;;;;;;;;;;;ACAA,+B;;;;;;;;;;;ACAA,iC;;;;;;;;;;;ACAA,kC;;;;;;;;;;;ACAA,6C;;;;;;;;;;;ACAA,yC","file":"index0.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./server/index.js\");\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"._1o-FpbQrR11SDFN-G7O4U3 {\\n  text-align: center;\\n}\\n\\n._3JCPttIlaO1n9gbarj-AYQ {\\n  height: 40vmin;\\n  pointer-events: none;\\n}\\n\\n@media (prefers-reduced-motion: no-preference) {\\n  ._3JCPttIlaO1n9gbarj-AYQ {\\n    animation: RvI1Jd7nZvV5oabR4RbAY infinite 20s linear;\\n  }\\n}\\n\\n._3iH8LjVH-8aINDFVrlCaZ1 {\\n  background-color: #282c34;\\n  min-height: 50vh;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  font-size: calc(10px + 2vmin);\\n  color: white;\\n}\\n\\n._13fTZYk7Fx94Q52NR6_8FR {\\n  color: #61dafb;\\n}\\n\\n@keyframes RvI1Jd7nZvV5oabR4RbAY {\\n  from {\\n    transform: rotate(0deg);\\n  }\\n  to {\\n    transform: rotate(360deg);\\n  }\\n}\\n\", \"\"]);\n// Exports\nexports.locals = {\n\t\"App\": \"_1o-FpbQrR11SDFN-G7O4U3\",\n\t\"App-logo\": \"_3JCPttIlaO1n9gbarj-AYQ\",\n\t\"App-logo-spin\": \"RvI1Jd7nZvV5oabR4RbAY\",\n\t\"App-header\": \"_3iH8LjVH-8aINDFVrlCaZ1\",\n\t\"App-link\": \"_13fTZYk7Fx94Q52NR6_8FR\"\n};\nmodule.exports = exports;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","/*! Isomorphic Style Loader | MIT License | https://github.com/kriasoft/isomorphic-style-loader */\n\n'use strict';\n\nvar inserted = {};\n\nfunction b64EncodeUnicode(str) {\n  return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, function (match, p1) {\n    return String.fromCharCode(\"0x\" + p1);\n  }));\n}\n\nfunction removeCss(ids) {\n  ids.forEach(function (id) {\n    if (--inserted[id] <= 0) {\n      var elem = document.getElementById(id);\n\n      if (elem) {\n        elem.parentNode.removeChild(elem);\n      }\n    }\n  });\n}\n\nfunction insertCss(styles, _temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      _ref$replace = _ref.replace,\n      replace = _ref$replace === void 0 ? false : _ref$replace,\n      _ref$prepend = _ref.prepend,\n      prepend = _ref$prepend === void 0 ? false : _ref$prepend,\n      _ref$prefix = _ref.prefix,\n      prefix = _ref$prefix === void 0 ? 's' : _ref$prefix;\n\n  var ids = [];\n\n  for (var i = 0; i < styles.length; i++) {\n    var _styles$i = styles[i],\n        moduleId = _styles$i[0],\n        css = _styles$i[1],\n        media = _styles$i[2],\n        sourceMap = _styles$i[3];\n    var id = \"\" + prefix + moduleId + \"-\" + i;\n    ids.push(id);\n\n    if (inserted[id]) {\n      if (!replace) {\n        inserted[id]++;\n        continue;\n      }\n    }\n\n    inserted[id] = 1;\n    var elem = document.getElementById(id);\n    var create = false;\n\n    if (!elem) {\n      create = true;\n      elem = document.createElement('style');\n      elem.setAttribute('type', 'text/css');\n      elem.id = id;\n\n      if (media) {\n        elem.setAttribute('media', media);\n      }\n    }\n\n    var cssText = css;\n\n    if (sourceMap && typeof btoa === 'function') {\n      cssText += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + b64EncodeUnicode(JSON.stringify(sourceMap)) + \"*/\";\n      cssText += \"\\n/*# sourceURL=\" + sourceMap.file + \"?\" + id + \"*/\";\n    }\n\n    if ('textContent' in elem) {\n      elem.textContent = cssText;\n    } else {\n      elem.styleSheet.cssText = cssText;\n    }\n\n    if (create) {\n      if (prepend) {\n        document.head.insertBefore(elem, document.head.childNodes[0]);\n      } else {\n        document.head.appendChild(elem);\n      }\n    }\n  }\n\n  return removeCss.bind(null, ids);\n}\n\nmodule.exports = insertCss;\n//# sourceMappingURL=insertCss.js.map\n","import React from 'react';\n\nexport default function RenderUI({ content, state }) {\n  return (\n    <html>\n      <body>\n        <div id=\"root\" dangerouslySetInnerHTML={{ __html: content }} />\n        <script\n          dangerouslySetInnerHTML={{\n            __html: `window.__INITIAL_STATE__=${JSON.stringify(state).replace(\n              /</g,\n              '\\\\u003c'\n            )};`,\n          }}\n        />\n      </body>\n    </html>\n  );\n}\n","const express = require('express')\nvar bodyParser = require('body-parser')\n// import proxy from 'express-http-proxy'\nimport ssr from './ssr.js'\n\nconst app = express()\napp.use(bodyParser.json());\n\napp.use(express.static('build'))\nssr(app)\n\napp.listen(3777)\n","import clientRoutes from \"../src/route\";\nimport React, { createElement } from \"react\";\nimport RenderUI from \"./components/renderUI\";\nimport { match as matchRoutes, RouterContext } from \"react-router\";\nimport { renderToString } from \"react-dom/server\";\nimport Foo from \"../src/foo\";\nconst path = require(\"path\");\nconst fs = require(\"fs\");\nimport App from '../src/App'\n\n// global\n// let clientRoutes = []\n\nconst template = fs.readFileSync(\n  path.resolve(__dirname, \"../build/index.html\"),\n  \"utf8\"\n);\n\nconst isPageRequest = (req) => /text\\/html/.test(req.headers.accept);\n\nexport default (app) => {\n  console.log(\"x-web start\");\n\n  app.get(\"/content\", (req, res) => {\n    res.send(renderToString(<Foo />));\n  });\n\n  app.post(\"/patchRoute\", (req, res) => {\n    console.log(\"req is: \", req.body);\n    clientRoutes = req.body.data;\n    res.send(\"oker\");\n  });\n\n  app.use(async function (req, res, next) {\n    if (clientRoutes.length === 0) {\n      res.end(\"ok2\");\n      return;\n    }\n    console.log(\"Accept: \", /text\\/html/.test(req.headers.accept));\n    if (isPageRequest(req)) {\n      console.log(\"clientRoutes: \", clientRoutes);\n      const { path } = req;\n      console.log(\"path is \", path);\n      matchRoutes(\n        { routes: clientRoutes, location: path },\n        async (error, redirect, ssrData) => {\n          // console.log(\"ssrData\", ssrData);\n          if (error) {\n            error();\n          } else if (redirect) {\n            res.redirect(302, redirect.pathname + redirect.search);\n          } else if (ssrData) {\n            // components 的第一个元素就是 layout 组件, 相当于 next.js 中 page\n            const Container = ssrData.components[0]\n            let props = Container.getInitialProps\n              ? await Container.getInitialProps()\n              : {};\n            ssrData.components[0] = p => {\n              const initialProps = {...p, ...props}\n              return <Container {...initialProps} />\n            }\n\n            // console.log(\"ssrData\", ssrData);\n          \n            let Component = createElement(RouterContext, ssrData);\n\n            const componentContent = renderToString(Component);\n\n            // console.log(\"componentContent: \", componentContent);\n\n            // console.log({ props });\n            const mainContent = renderToString(\n              <RenderUI content={componentContent} state={props} />\n            );\n\n            // console.log(mainContent);\n            // res.end(mainContent);\n\n            res.end(\n              template.replace(/<div id=\"root\"><\\/div>/, `${mainContent}`)\n            );\n          } else {\n            error();\n          }\n        }\n      );\n      return;\n      // console.log(branch);\n      // //得到要渲染的组件\n      console.log(branch);\n      const Component = branch[0].route.component;\n      // var RenderFunction\n      // const componentFunString = `RenderFunction = ${Component}`\n      // console.log(componentFunString)\n      // eval(componentFunString)\n      //将组件渲染为 html 字符串\n      try {\n        let props = Component.getInitialProps\n          ? await Component.getInitialProps()\n          : {};\n\n        console.log({ props });\n        const componentContent = renderToString(<Component {...props} />);\n\n        const mainContent = renderToString(\n          <RenderUI content={componentContent} state={props} />\n        );\n\n        console.log(mainContent);\n        // res.end(mainContent);\n\n        res.end(\n          template.replace(\n            /<div id=\"root\"><\\/div>/,\n            `<div id=\"root\">${mainContent}</div>`\n          )\n        );\n      } catch (e) {\n        console.warn(e);\n      }\n    }\n    next();\n  });\n};\n","\n    var refs = 0;\n    var css = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--5-1!./App.css\");\n    var insertCss = require(\"!../node_modules/isomorphic-style-loader/insertCss.js\");\n    var content = typeof css === 'string' ? [[module.id, css, '']] : css;\n\n    exports = module.exports = css.locals || {};\n    exports._getContent = function() { return content; };\n    exports._getCss = function() { return '' + css; };\n    exports._insertCss = function(options) { return insertCss(content, options) };\n\n    // Hot Module Replacement\n    // https://webpack.github.io/docs/hot-module-replacement\n    // Only activated in browser context\n    if (module.hot && typeof window !== 'undefined' && window.document) {\n      var removeCss = function() {};\n      module.hot.accept(\"!!../node_modules/css-loader/dist/cjs.js??ref--5-1!./App.css\", function() {\n        css = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--5-1!./App.css\");\n        content = typeof css === 'string' ? [[module.id, css, '']] : css;\n        removeCss = insertCss(content, { replace: true });\n      });\n      module.hot.dispose(function() { removeCss(); });\n    }\n  ","import React, { useState, useEffect, Children } from \"react\";\n// import logo from './logo.svg';\nimport \"./App.css\";\n\nfunction App({ children, InitialMsg }) {\n  const [msg, setMsg] = useState(InitialMsg || \"client\");\n\n  // const [childProps, setChildProps] = useState({});\n\n  // let Component = null;\n  // if (children) {\n  //   Component = () => Children.only(children);\n  //   console.log(78778, Component);\n  //   if (Component.getInitialProps)\n  //     this.getInitialProps = async () => {\n  //       const props = await Component.getInitialProps;\n  //       setChildProps(props);\n  //     };\n  // }\n\n  useEffect(() => {\n    window.NUMBER = 7;\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        {/* <img src={logo} className=\"App-logo\" alt=\"logo\" /> */}\n        <p>\n          Edit <code>src/App.js</code> and save to reload.\n        </p>\n        <a\n          className=\"App-link\"\n          href=\"https://reactjs.org\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Render from {msg}\n        </a>\n        <button\n          onClick={() => {\n            console.log(123123);\n          }}\n        >\n          click me\n        </button>\n      </header>\n      {children}\n    </div>\n  );\n}\n\nexport default App;\n\nApp.getInitialProps = async () => {\n  return await InitialProps();\n};\n\nfunction InitialProps() {\n  return new Promise((res) => {\n    setTimeout(() => {\n      const InitialMsg = typeof window === \"undefined\" ? \"server\" : \"client\";\n      res({ InitialMsg });\n    }, 500);\n  });\n}\n","import React, { useState } from \"react\";\n\nexport default function Child({ InitialNum, InitialMsg }) {\n  const [num, setNum] = useState(InitialNum || 7);\n  const [msg, setMsg] = useState(InitialMsg || 'empty');\n  return (\n    <>\n      <p>{msg}</p>\n      <button onClick={() => setNum(num + 1)}>add</button>\n      <p>{num}</p>\n    </>\n  );\n}\n\n// Child.getInitialProps = async () => {\n//   return await InitialProps();\n// };\n\n// function InitialProps() {\n//   return new Promise((res) => {\n//     setTimeout(() => {\n//       const InitialNum = typeof window === \"undefined\" ? 1 : 0;\n//       const InitialMsg = typeof window === \"undefined\" ? 'server' : 'client';\n//       res({ InitialNum, InitialMsg });\n//     }, 500);\n//   });\n// }\n","import React from \"react\";\n\n// 客户端初始渲染高阶组件\nexport default function ClientRender(Component) {\n  if (typeof window === \"undefined\") {\n    return Component;\n  }\n  const props = window.__INITIAL_STATE__ || {};\n  window.__INITIAL_STATE__ = null;\n  // 在客户端 getInitialProps 定义了异步方法会报错\n  // Error: Objects are not valid as a React child (found: [object Promise])\n  Component.getInitialProps = null;\n  return p => {\n    const initialProps = {...p, ...props}\n    return <Component {...initialProps} />\n  };\n}\n","import React, { useState } from 'react'\n\nexport default function Foo() {\n  const [num, setNum] = useState(0)\n  return <>\n    <p> I am foo </p>\n    <button onClick={() => setNum(num + 1)}>add</button>\n    <p>{num}</p>\n  </>\n}\n","import App from \"./App\";\nimport Child from \"./child\";\nimport foo from \"./foo\";\nimport ClientRender from \"./clientRender\";\n\nexport default [\n  // {\n  //   component: App,\n  //   routes: [\n  //     {\n  //       path: \"/\",\n  //       component: App,\n  //       exact: true,\n  //       routes: [\n  //         {\n  //           path: \"/b\",\n  //           component: ClientRender(foo),\n  //         },\n  //         {\n  //           path: \"/c\",\n  //           component: ClientRender(Child),\n  //         },\n  //       ]\n  //     },\n  //   ],\n  // },\n  {\n    path: \"/\",\n    component: ClientRender(App),\n    childRoutes: [\n      {\n        path: \"b\",\n        component: foo,\n      },\n      {\n        path: \"c\",\n        // exact: true, \n        component: Child,\n      },\n    ],\n  },\n  // {\n  //   path: \"/c\",\n  //   component: ClientRender(Child),\n  // },\n];\n","module.exports = require(\"body-parser\");","module.exports = require(\"express\");","module.exports = require(\"fs\");","module.exports = require(\"path\");","module.exports = require(\"react\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"react-router\");"],"sourceRoot":""}